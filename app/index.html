<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <meta name="theme-color" content="#1f2937" />
  <title>VITECHBOT</title>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç Telegram WebApp (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!) -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ —Å—Ç–∏–ª–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã -->
  <link rel="stylesheet" href="./style.css" />
  <script src="./script.js" defer></script>
</head>
<body>
  <!-- –≠–∫—Ä–∞–Ω –¥–ª—è –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö: —Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
  <div id="unregistered-screen" class="unregistered-screen" style="display: none;">
    <p style="color: #94A3B8; font-size: 18px; margin-bottom: 12px;">–í—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.</p>
    <p style="color: #64748B; font-size: 14px;">–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ –±–æ—Ç–µ (–∫–Ω–æ–ø–∫–∞ ¬´–ù–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é¬ª –∏–ª–∏ –∫–æ–º–∞–Ω–¥–∞ /start), –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.</p>
  </div>

  <!-- –®–∞–ø–∫–∞ (—Ç–æ–ª—å–∫–æ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π); –∫–ª–∏–∫ –ø–æ –∞–≤–∞—Ç–∞—Ä—É/–¥–∞–Ω–Ω—ã–º ‚Üí –ú–æ–∏ –¥–∞–Ω–Ω—ã–µ -->
  <header class="header" id="main-header">
    <div class="user-section clickable-profile" id="open-profile-btn" style="display: flex; align-items: center; gap: 12px;">
      <img src="https://ui-avatars.com/api/?name=–ó–∞–≥—Ä—É–∑–∫–∞...&background=3B82F6&color=fff" 
           alt="–ê–≤–∞—Ç–∞—Ä" class="avatar" />
      <div class="profile-info">
        <p id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        <p id="userCourse">–ö—É—Ä—Å: ‚Äî</p>
        <p id="userGroup">–ì—Ä—É–ø–ø–∞: ‚Äî</p>
        <p id="userRole" style="color: #94A3B8; font-size: 12px;">–†–æ–ª—å: ‚Äî</p>
      </div>
    </div>
    <div class="header-icons">
      <button class="icon-btn" onclick="openNotifications()">üîî</button>
      <button class="icon-btn" onclick="openSettings()">‚ãÆ</button>
    </div>
  </header>

  <!-- –≠–∫—Ä–∞–Ω ¬´–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ¬ª: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–≤—ë—Ä–Ω—É—Ç—ã, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–æ –∫–ª–∏–∫—É -->
  <div id="profile-screen" class="app-screen" style="display: none;">
    <div class="widget" style="max-width: 480px; margin: 0 auto;">
      <div id="profile-unregistered-msg" style="display: none; padding: 16px 0; color: #94A3B8;">
        <p>–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ –±–æ—Ç–µ (–∫–æ–º–∞–Ω–¥–∞ /start –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ ¬´–ù–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é¬ª), –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.</p>
        <button type="button" id="profile-back-unreg" style="margin-top: 12px; padding: 10px 20px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">–ù–∞–∑–∞–¥</button>
      </div>
      <div id="profile-toggle" class="profile-toggle" style="display: flex; align-items: center; justify-content: space-between; cursor: pointer; padding: 12px 0;">
        <h3 style="color: #93C5FD; margin: 0;">üë§ –ú–æ–∏ –¥–∞–Ω–Ω—ã–µ</h3>
        <span id="profile-toggle-icon" style="color: #94A3B8;">‚ñ∂ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å</span>
      </div>
      <div id="profile-body" style="display: none;">
        <div style="margin-bottom: 12px;">
          <label style="color: #94A3B8; font-size: 12px;">–§–ò–û</label>
          <input type="text" id="profile-fio" placeholder="–§–ò–û" style="width: 100%; padding: 10px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #E2E8F0; box-sizing: border-box;" />
        </div>
        <div style="margin-bottom: 12px;">
          <label style="color: #94A3B8; font-size: 12px;">–ö—É—Ä—Å (–≥–æ–¥ –Ω–∞–±–æ—Ä–∞)</label>
          <p id="profile-course" style="color: #CBD5E1; margin: 4px 0 0 0;">‚Äî</p>
        </div>
        <div style="margin-bottom: 16px;">
          <label style="color: #94A3B8; font-size: 12px;">–ì—Ä—É–ø–ø–∞</label>
          <input type="text" id="profile-group" placeholder="–ì—Ä—É–ø–ø–∞" style="width: 100%; padding: 10px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #E2E8F0; box-sizing: border-box;" />
        </div>
        <p id="profile-role" style="color: #94A3B8; font-size: 13px; margin-bottom: 16px;">–†–æ–ª—å: ‚Äî</p>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
          <button type="button" id="profile-save" style="padding: 10px 20px; background: #3B82F6; color: white; border: none; border-radius: 8px; cursor: pointer;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button type="button" id="profile-back" style="padding: 10px 20px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">–ù–∞–∑–∞–¥</button>
          <button type="button" id="profile-admin-panel" style="display: none; padding: 10px 20px; background: #6366F1; color: white; border: none; border-radius: 8px; cursor: pointer;">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
          <button type="button" id="profile-assistant-panel" style="display: none; padding: 10px 20px; background: #8B5CF6; color: white; border: none; border-radius: 8px; cursor: pointer;">üõ† –ü–∞–Ω–µ–ª—å –ø–æ–º–æ—â–Ω–∏–∫–∞</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ê–¥–º–∏–Ω / –ü–æ–º–æ—â–Ω–∏–∫: —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å–Ω—è—Ç–∏–µ —Ä–æ–ª–µ–π -->
  <div id="admin-panel-screen" class="app-screen" style="display: none;">
    <div style="padding: 16px; max-width: 600px; margin: 0 auto;">
      <h3 id="admin-panel-title" style="color: #93C5FD; margin-bottom: 12px;">–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
      <div style="display: flex; gap: 8px; margin-bottom: 12px; flex-wrap: wrap;">
        <select id="admin-filter-year" style="padding: 8px 12px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #E2E8F0;">
          <option value="">–í—Å–µ –∫—É—Ä—Å—ã</option>
        </select>
        <input type="text" id="admin-search-fio" placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û" style="flex: 1; min-width: 120px; padding: 8px 12px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #E2E8F0;" />
        <button type="button" id="admin-load-users" style="padding: 8px 16px; background: #3B82F6; color: white; border: none; border-radius: 8px; cursor: pointer;">–û–±–Ω–æ–≤–∏—Ç—å</button>
      </div>
      <button type="button" id="admin-back" style="margin-bottom: 12px; padding: 8px 16px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">‚Üê –ù–∞–∑–∞–¥</button>
      <div id="admin-users-list" style="background: #1E293B; border-radius: 12px; padding: 12px; max-height: 60vh; overflow-y: auto;"></div>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (–≤–∏–¥–∂–µ—Ç—ã) –¥–ª—è –≥–ª–∞–≤–Ω–æ–π -->
  <main class="main app-screen active" id="main-content">
    <div class="widget">
      <h3>üå°Ô∏è –ü–æ–≥–æ–¥–∞ –≤ –í–æ—Ä–æ–Ω–µ–∂–µ</h3>
      <p>-3¬∞C, —Å–Ω–µ–≥ ‚ùÑÔ∏è</p>
    </div>
    <div class="widget">
      <h3>üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
      <ul class="schedule-list" style="list-style: none; padding: 0; margin: 0;">
        <li style="margin-bottom: 6px;">9:00 ‚Äî –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ (310) ‚Äî –ò–≤–∞–Ω–æ–≤ –ò.–ò.</li>
        <li style="margin-bottom: 6px;">11:00 ‚Äî –§–∏–∑–∏–∫–∞ (215) ‚Äî –ü–µ—Ç—Ä–æ–≤ –ü.–ü.</li>
        <li style="margin-bottom: 6px;">14:00 ‚Äî –•–∏–º–∏—è (405) ‚Äî –°–∏–¥–æ—Ä–æ–≤–∞ –ê.–ö.</li>
        <li>16:00 ‚Äî –§–∏–∑-—Ä–∞ (—Å—Ç–∞–¥–∏–æ–Ω) ‚Äî –ö–æ–∑–ª–æ–≤ –í.–°.</li>
      </ul>
    </div>
    <div class="widget" id="next-duty-widget">
      <h3>üéñÔ∏è –ë–ª–∏–∂–∞–π—à–∏–π –Ω–∞—Ä—è–¥</h3>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
    </div>
    <div class="widget">
      <h3>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
      <ul class="notification-list" style="list-style: none; padding: 0; margin: 0;">
        <li style="margin-bottom: 6px;">–°–µ—Ä–∂–∞–Ω—Ç: –ì—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ 15.02</li>
        <li style="margin-bottom: 6px;">–ê–¥–º–∏–Ω: –û—Ç–º–µ–Ω–∞ –ø–∞—Ä—ã –ø–æ —Ñ–∏–∑–∏–∫–µ</li>
        <li>–°–∏—Å—Ç–µ–º–∞: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: —Å–¥–∞—Ç—å —Ñ–æ—Ä–º—É</li>
      </ul>
    </div>
  </main>

  <!-- –≠–∫—Ä–∞–Ω –∑–∞–º–µ—Ç–æ–∫: —Å–Ω–∞—á–∞–ª–∞ –ø–æ–∏—Å–∫, –ø–æ–¥ –Ω–∏–º —Ç–∞–±—ã –ê–∫—Ç–∏–≤–Ω—ã–µ/–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ -->
  <div id="notes-screen" class="app-screen">
    <div class="search-bar">
      <svg width="16" height="16" fill="currentColor"><path d="M15.5 14.3l-3.7-3.7c1.2-1.5 1.8-3.4 1.5-5.3-0.4-2.3-2.2-4.1-4.5-4.5-3.9-0.8-7.2 2.4-6.4 6.3 0.4 2.3 2.2 4.1 4.5 4.5 1.9 0.3 3.8-0.3 5.3-1.5l3.7 3.7c0.4 0.4 1 0.4 1.4 0s0.4-1 0-1.4z"/></svg>
      <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–¥–∞—á–∞–º..." />
    </div>
    <div class="notes-tabs">
      <button id="tab-active" class="notes-tab active" onclick="setNotesTab('active')">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
      <button id="tab-done" class="notes-tab" onclick="setNotesTab('done')">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</button>
    </div>
    <div class="task-list" id="task-list">
      <p style="color: #6b7280; text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Ä—è–¥–æ–≤ -->
  <div id="duties-screen" class="app-screen">
    <div style="padding: 12px 16px;">

      <!-- –ë–∞–Ω–Ω–µ—Ä –æ–ø—Ä–æ—Å–∞ -->
      <div id="duty-survey-banner" style="background: #1E293B; border: 1px solid #3B82F6; border-radius: 8px; padding: 12px; margin-bottom: 12px;"></div>

      <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ç—É–ª–±–∞—Ä —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ -->
      <div id="duty-toolbar" style="display: flex; gap: 8px; overflow-x: auto; padding-bottom: 8px; margin-bottom: 12px; scrollbar-width: thin;">
        <button type="button" class="duty-tool-btn duty-tool-active" data-view="my" onclick="dutySetView('my')" style="white-space: nowrap; padding: 8px 16px; border-radius: 20px; border: 1px solid #334155; background: #3B82F6; color: white; font-size: 13px; cursor: pointer;">–ú–æ–∏ –Ω–∞—Ä—è–¥—ã</button>
        <button type="button" class="duty-tool-btn" data-view="calendar" onclick="dutySetView('calendar')" style="white-space: nowrap; padding: 8px 16px; border-radius: 20px; border: 1px solid #334155; background: #1E293B; color: #CBD5E1; font-size: 13px; cursor: pointer;">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</button>
        <button type="button" class="duty-tool-btn" data-view="search" onclick="dutySetView('search')" style="white-space: nowrap; padding: 8px 16px; border-radius: 20px; border: 1px solid #334155; background: #1E293B; color: #CBD5E1; font-size: 13px; cursor: pointer;">–ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–µ</button>
        <button type="button" class="duty-tool-btn" data-view="upload" onclick="dutySetView('upload')" id="duty-tool-upload" style="display: none; white-space: nowrap; padding: 8px 16px; border-radius: 20px; border: 1px solid #334155; background: #1E293B; color: #CBD5E1; font-size: 13px; cursor: pointer;">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        <button type="button" class="duty-tool-btn" data-view="stats" onclick="dutySetView('stats')" style="white-space: nowrap; padding: 8px 16px; border-radius: 20px; border: 1px solid #334155; background: #1E293B; color: #CBD5E1; font-size: 13px; cursor: pointer;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
      </div>

      <!-- ===== –í–ò–î 1: –ú–û–ò –ù–ê–†–Ø–î–´ ===== -->
      <div id="duty-view-my">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º (—Ç–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ) -->
        <div id="duty-month-nav" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
          <button id="prev-month-btn" onclick="changeMonth(-1)" style="background: #1E293B; border: none; color: #CBD5E1; padding: 8px 16px; border-radius: 8px; cursor: pointer;">‚Üê</button>
          <h3 id="current-month" style="color: #93C5FD; margin: 0; font-size: 18px;">‚Äî</h3>
          <button id="next-month-btn" onclick="changeMonth(1)" style="background: #1E293B; border: none; color: #CBD5E1; padding: 8px 16px; border-radius: 8px; cursor: pointer;">‚Üí</button>
        </div>
        <p id="duties-month-stats" style="color: #94A3B8; font-size: 13px; margin: 0 0 8px 0; display: none;"></p>
        <!-- –í–∫–ª–∞–¥–∫–∏ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ / –ü—Ä–æ—à–µ–¥—à–∏–µ -->
        <div id="duty-tabs" style="display: flex; gap: 0; margin-bottom: 12px; border-radius: 8px; overflow: hidden; border: 1px solid #334155;">
          <button type="button" id="duty-tab-upcoming" onclick="dutySetTab('upcoming')" style="flex: 1; padding: 10px; background: #3B82F6; color: white; border: none; font-size: 14px; cursor: pointer;">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ</button>
          <button type="button" id="duty-tab-past" onclick="dutySetTab('past')" style="flex: 1; padding: 10px; background: #1E293B; color: #94A3B8; border: none; font-size: 14px; cursor: pointer;">–ü—Ä–æ—à–µ–¥—à–∏–µ</button>
        </div>
        <!-- –°–ø–∏—Å–æ–∫ –Ω–∞—Ä—è–¥–æ–≤ -->
        <div id="duties-list-container">
          <p style="color: #64748B; text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Ä—è–¥–æ–≤...</p>
        </div>
      </div>

      <!-- ===== –í–ò–î 2: –ö–ê–õ–ï–ù–î–ê–†–¨ ===== -->
      <div id="duty-view-calendar" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
          <button onclick="calMonth(-1)" style="background: #1E293B; border: none; color: #CBD5E1; padding: 8px 16px; border-radius: 8px; cursor: pointer;">‚Üê</button>
          <h3 id="cal-month-label" style="color: #93C5FD; margin: 0; font-size: 18px;">‚Äî</h3>
          <button onclick="calMonth(1)" style="background: #1E293B; border: none; color: #CBD5E1; padding: 8px 16px; border-radius: 8px; cursor: pointer;">‚Üí</button>
        </div>
        <div id="duty-calendar-grid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; margin-bottom: 16px;"></div>
        <div id="duty-day-detail" style="display: none;"></div>
      </div>

      <!-- ===== –í–ò–î 3: –ü–û–ò–°–ö ===== -->
      <div id="duty-view-search" style="display: none;">
        <input type="date" id="duty-date-search" style="width: 100%; padding: 10px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #CBD5E1; font-size: 14px; margin-bottom: 12px; box-sizing: border-box;" onchange="searchDutyByDate(this.value)" />
        <div id="date-search-results" style="display: none;">
          <div id="date-search-content"></div>
        </div>
      </div>

      <!-- ===== –í–ò–î 4: –ó–ê–ì–†–£–ó–ö–ê ===== -->
      <div id="duty-view-upload" style="display: none;">
        <div style="padding: 12px; background: #1E293B; border-radius: 8px; border-left: 4px solid #8B5CF6;">
          <p style="color: #93C5FD; font-weight: 600; margin: 0 0 8px 0;">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫</p>
          <p style="color: #94A3B8; font-size: 12px; margin: 0 0 8px 0;">–°–∫–∞—á–∞–π—Ç–µ —à–∞–±–ª–æ–Ω, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ (–≥—Ä—É–ø–ø–∞, –≥–æ–¥ –≤ AO4, –§–ò–û, –º–µ—Å—è—Ü, –¥–Ω–∏, —Ä–æ–ª–∏) –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ.</p>
          <a id="duty-template-link" href="#" target="_blank" rel="noopener" style="display: inline-block; margin-bottom: 8px; color: #60A5FA;">üì• –°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω .xlsx</a>
          <input type="file" id="duty-upload-file" accept=".xlsx" style="display: block; margin-bottom: 8px; color: #CBD5E1;" />
          <button type="button" id="duty-upload-btn" style="padding: 8px 16px; background: #8B5CF6; color: white; border: none; border-radius: 8px; cursor: pointer;">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        </div>
      </div>

      <!-- ===== –í–ò–î 5: –°–¢–ê–¢–ò–°–¢–ò–ö–ê ===== -->
      <div id="duty-view-stats" style="display: none;">
        <div id="duty-stats-content" style="color: #94A3B8; text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      </div>

      <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –¥–µ—Ç–∞–ª–∏ –Ω–∞—Ä—è–¥–∞ -->
      <div id="duty-detail-modal" style="display: none; position: fixed; inset: 0; background: rgba(15,23,42,0.92); z-index: 1100; padding: 16px; overflow-y: auto;">
        <div style="max-width: 500px; margin: 40px auto;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h3 id="duty-detail-title" style="color: #93C5FD; margin: 0;"></h3>
            <button type="button" onclick="closeDutyDetail()" style="background: none; border: none; color: #94A3B8; font-size: 24px; cursor: pointer;">‚úï</button>
          </div>
          <div id="duty-detail-body"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω —É—á—ë–±—ã (–∑–∞–≥–ª—É—à–∫–∞) -->
  <div id="study-screen" class="app-screen">
    <div class="widget">
      <h3>üìö –£—á—ë–±–∞</h3>
      <p>–ú–æ–¥—É–ª—å –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ó–¥–µ—Å—å –±—É–¥—É—Ç —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.</p>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –æ–ø—Ä–æ—Å–∞: –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É —á—Ç–æ–±—ã —à–∞–ø–∫–∞ –Ω–µ –∑–∞–≥–æ—Ä–∞–∂–∏–≤–∞–ª–∞ -->
  <div
    id="survey-screen"
    style="
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.9);
      z-index: 1000;
      padding: 16px;
      padding-top: 72px;
      box-sizing: border-box;
      overflow-y: auto;
    "
  >
    <div style="max-width: 600px; margin: 0 auto;">
      <!-- –°–ø–∏—Å–æ–∫ –æ–ø—Ä–æ—Å–æ–≤: —Å–∏—Å—Ç–µ–º–Ω—ã–µ + –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ -->
      <div id="survey-list-block" class="survey-list-block">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <h2 style="color: #93C5FD; margin: 0;">üìä –û–ø—Ä–æ—Å—ã</h2>
          <button type="button" onclick="switchTab('home')" class="survey-close-btn">‚úï</button>
        </div>
        <p style="color: #94A3B8; font-size: 14px; margin-bottom: 12px;">–°–∏—Å—Ç–µ–º–Ω—ã–µ –æ–ø—Ä–æ—Å—ã (—Å–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Ä—è–¥–æ–≤)</p>
        <div id="survey-system-cards" style="display: flex; flex-direction: column; gap: 10px;"></div>
        <div id="survey-finalize-in-list" style="display: none; margin-top: 12px; padding: 12px; background: #1E293B; border-radius: 8px; border-left: 4px solid #8B5CF6;">
          <p style="color: #94A3B8; font-size: 13px; margin: 0 0 8px 0;">–ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –≤–µ—Å–∞ –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–∞—É–Ω–¥ –æ–ø—Ä–æ—Å–∞.</p>
          <button type="button" id="survey-finalize-in-list-btn" style="padding: 10px 16px; background: #8B5CF6; color: white; border: none; border-radius: 8px; cursor: pointer;">–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø—Ä–æ—Å</button>
        </div>
        <div id="survey-custom-section" style="margin-top: 20px; display: none;">
          <p style="color: #94A3B8; font-size: 14px; margin-bottom: 12px;">–û–ø—Ä–æ—Å—ã –≤–∞—à–µ–π –≥—Ä—É–ø–ø—ã / –∫—É—Ä—Å–∞</p>
          <div id="survey-custom-cards" style="display: flex; flex-direction: column; gap: 10px;"></div>
        </div>
        <div id="survey-create-wrap" style="margin-top: 20px; display: none;">
          <button type="button" id="survey-create-btn" style="width: 100%; padding: 12px; background: #334155; color: #93C5FD; border: 1px dashed #64748B; border-radius: 8px; cursor: pointer;">‚ûï –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å</button>
        </div>
      </div>
      <!-- –£–∂–µ –ø—Ä–æ—à–ª–∏ –æ–ø—Ä–æ—Å: –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–æ—Ä–º—É –ø–æ–≤—Ç–æ—Ä–Ω–æ -->
      <div id="survey-already-passed" class="survey-intro-block" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
          <h2 style="color: #93C5FD; margin: 0;">üìä –û–ø—Ä–æ—Å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞—Ä—è–¥–æ–≤</h2>
          <div>
            <button type="button" onclick="showSurveyList()" class="survey-back-btn" style="margin-right:8px;">‚Üê –ö —Å–ø–∏—Å–∫—É</button>
            <button type="button" onclick="switchTab('home')" class="survey-close-btn">‚úï</button>
          </div>
        </div>
        <p style="color: #10B981; font-size: 16px; font-weight: 600; margin-bottom: 12px;">‚úÖ –í—ã —É–∂–µ –ø—Ä–æ—à–ª–∏ –æ–ø—Ä–æ—Å.</p>
        <p style="color: #94A3B8; font-size: 14px;">–í–µ—Å–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî –Ω–∏–∂–µ. –ü–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.</p>
        <div id="survey-results-in-tab" style="display: none; margin-top: 16px;"></div>
        <button type="button" onclick="switchTab('home')" class="survey-intro-start-btn" style="margin-top: 20px;">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
      </div>
      <!-- –í–≤–æ–¥ –≤ –∫—É—Ä—Å –¥–µ–ª–∞: –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–µ–º—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
      <div id="survey-intro" class="survey-intro-block" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
          <h2 style="color: #93C5FD; margin: 0;">üìä –û–ø—Ä–æ—Å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞—Ä—è–¥–æ–≤</h2>
          <div>
            <button type="button" onclick="showSurveyList()" class="survey-back-btn" style="margin-right:8px;">‚Üê –ö —Å–ø–∏—Å–∫—É</button>
            <button type="button" onclick="switchTab('home')" class="survey-close-btn">‚úï</button>
          </div>
        </div>
        <div class="survey-intro-cards">
          <div class="survey-intro-card active" data-card="0">
            <h3 style="color: #93C5FD; font-size: 15px; margin-bottom: 10px;">–ó–∞—á–µ–º —ç—Ç–æ—Ç –æ–ø—Ä–æ—Å</h3>
            <p style="color: #CBD5E1; font-size: 14px; line-height: 1.5;">–í–∞–º –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –æ—Ü–µ–Ω–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Ä—è–¥–æ–≤ –ø–æ–ø–∞—Ä–Ω–æ. –ü–æ –≤–∞—à–∏–º –æ—Ç–≤–µ—Ç–∞–º –±—É–¥–µ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å ‚Äî –∫–∞–∂–¥–æ–º—É –Ω–∞—Ä—è–¥—É –ø—Ä–∏—Å–≤–æ–∏—Ç—Å—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–≤–µ—Å).</p>
          </div>
          <div class="survey-intro-card" data-card="1">
            <h3 style="color: #93C5FD; font-size: 15px; margin-bottom: 10px;">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
            <p style="color: #CBD5E1; font-size: 14px; line-height: 1.5;">–í—ã —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç–µ –Ω–∞—Ä—è–¥—ã –ø–æ–ø–∞—Ä–Ω–æ: –≤—ã–±–∏—Ä–∞–µ—Ç–µ, –∫–∞–∫–æ–π –∏–∑ –¥–≤—É—Ö —Ç—è–∂–µ–ª–µ–µ, –∏–ª–∏ ¬´—Ä–∞–≤–Ω—ã¬ª. –°–∏—Å—Ç–µ–º–∞ –ø–æ –≤—Å–µ–º –æ—Ç–≤–µ—Ç–∞–º –≤—ã—á–∏—Å–ª—è–µ—Ç —Å—Ä–µ–¥–Ω–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞—Ä—è–¥–∞.</p>
            <p style="color: #94A3B8; font-size: 13px; margin-top: 10px;">–ë–∞–∑–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ ‚Äî 10 –æ—á–∫–æ–≤. –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞—Ä—è–¥–∞ = 10 √ó –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.4 ‚Üí 14 –æ—á–∫–æ–≤, 0.8 ‚Üí 8 –æ—á–∫–æ–≤). –†–µ–π—Ç–∏–Ω–≥ –∫—É—Ä—Å–∞–Ω—Ç–∞ ‚Äî —Å—É–º–º–∞ –æ—á–∫–æ–≤ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Ä—è–¥—ã.</p>
          </div>
          <div class="survey-intro-card" data-card="2">
            <h3 style="color: #93C5FD; font-size: 15px; margin-bottom: 10px;">–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ</h3>
            <p style="color: #CBD5E1; font-size: 14px; line-height: 1.5;">–ß—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –∫–∞–∫–∏–µ –Ω–∞—Ä—è–¥—ã –ø–æ –º–Ω–µ–Ω–∏—é –∫—É—Ä—Å–∞ —Ç—è–∂–µ–ª–µ–µ, –∫–∞–∫–∏–µ –ª–µ–≥—á–µ. –ß—Ç–æ–±—ã —Å–µ—Ä–∂–∞–Ω—Ç—ã –ø—Ä–∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –º–æ–≥–ª–∏ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ —Ü–∏—Ñ—Ä—ã –∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É.</p>
          </div>
          <div class="survey-intro-card" data-card="3">
            <h3 style="color: #93C5FD; font-size: 15px; margin-bottom: 10px;">–ß—Ç–æ –¥–∞–ª—å—à–µ</h3>
            <p style="color: #CBD5E1; font-size: 14px; line-height: 1.5;">–ü–æ—Å–ª–µ –æ–ø—Ä–æ—Å–∞ –±—É–¥–µ—Ç —Ç–∞–±–ª–∏—Ü–∞ —Å –∏—Ç–æ–≥–æ–≤—ã–º–∏ –≤–µ—Å–∞–º–∏. –†–∞–∑ –≤ –º–µ—Å—è—Ü –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π –Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö.</p>
          </div>
          <div class="survey-intro-card" data-card="4">
            <h3 style="color: #93C5FD; font-size: 15px; margin-bottom: 10px;">–ö–∞–∫ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å</h3>
            <p style="color: #CBD5E1; font-size: 14px; line-height: 1.5;">–î–≤–∞ –±–ª–æ–∫–∞: 6 –ø–∞—Ä –ø–æ –æ—Å–Ω–æ–≤–Ω—ã–º –Ω–∞—Ä—è–¥–∞–º (–ö—É—Ä—Å, –ì–ë–†, –°—Ç–æ–ª–æ–≤–∞—è, –ó–£–ë) –∏ –≤—Å–µ 15 –ø–∞—Ä –ø–æ –æ–±—ä–µ–∫—Ç–∞–º –≤ —Å—Ç–æ–ª–æ–≤–æ–π (–ì–æ—Ä—è—á–∏–π —Ü–µ—Ö, –û–≤–æ—â–Ω–æ–π —Ü–µ—Ö, –°—Ç–∞–∫–∞–Ω—ã, –ñ–µ–ª–µ–∑–æ, –õ–µ–Ω—Ç–∞, –¢–∞—Ä–µ–ª–∫–∏) ‚Äî –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π, —á–µ—Å—Ç–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–µ—Ç ‚Äî —Ç–æ–ª—å–∫–æ –≤–∞—à–µ –º–Ω–µ–Ω–∏–µ.</p>
          </div>
        </div>
        <div class="survey-intro-nav">
          <button type="button" id="survey-intro-prev" class="survey-intro-nav-btn">‚Üê –ù–∞–∑–∞–¥</button>
          <span id="survey-intro-dots"></span>
          <button type="button" id="survey-intro-next" class="survey-intro-nav-btn">–î–∞–ª–µ–µ ‚Üí</button>
        </div>
        <button type="button" id="survey-intro-start" class="survey-intro-start-btn">–ü—Ä–æ–π—Ç–∏ –æ–ø—Ä–æ—Å</button>
      </div>

      <!-- –°–∞–º –æ–ø—Ä–æ—Å: –ø–∞—Ä—ã –∏ –∫–Ω–æ–ø–∫–∞ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª -->
      <div id="survey-content" class="survey-content-block" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
          <h2 style="color: #93C5FD; margin: 0;">üìä –û–ø—Ä–æ—Å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞—Ä—è–¥–æ–≤</h2>
          <div>
            <button type="button" onclick="showSurveyList()" class="survey-back-btn" style="margin-right:8px;">‚Üê –ö —Å–ø–∏—Å–∫—É</button>
            <button type="button" onclick="switchTab('home')" class="survey-close-btn">‚úï</button>
          </div>
        </div>
        <p style="color: #CBD5E1; margin-bottom: 16px;" id="survey-description">–ö–∞–∫–æ–π –Ω–∞—Ä—è–¥ —Å–ª–æ–∂–Ω–µ–µ –º–æ—Ä–∞–ª—å–Ω–æ/—Ñ–∏–∑–∏—á–µ—Å–∫–∏? –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç.</p>
        <div id="survey-stage-indicator" style="color: #93C5FD; font-size: 14px; margin-bottom: 12px;"></div>
        <div id="survey-objects-container">
          <p style="color: #6b7280; text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä...</p>
        </div>
        <button type="button" id="submit-survey-btn" class="survey-submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>

      <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—Ä–æ—Å: –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä -->
      <div id="survey-custom-block" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
          <h2 style="color: #93C5FD; margin: 0;" id="survey-custom-title">–û–ø—Ä–æ—Å</h2>
          <div>
            <button type="button" onclick="showSurveyList()" class="survey-back-btn" style="margin-right:8px;">‚Üê –ö —Å–ø–∏—Å–∫—É</button>
            <button type="button" onclick="switchTab('home')" class="survey-close-btn">‚úï</button>
          </div>
        </div>
        <div id="survey-custom-options" style="display: flex; flex-direction: column; gap: 8px;"></div>
        <div id="survey-custom-complete-wrap" style="margin-top: 16px; display: none;">
          <button type="button" id="survey-custom-complete-btn" style="padding: 10px 16px; background: #8B5CF6; color: white; border: none; border-radius: 8px; cursor: pointer;">–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø—Ä–æ—Å</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø–∞—Ä–∞–º (–ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏–µ) -->
  <div id="pair-stats-modal" class="modal modal-center" style="display: none;">
    <div class="modal-content" style="max-width: 420px; padding: 20px; border-radius: 12px;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <span style="color: #93C5FD; font-weight: 600;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø–∞—Ä–∞–º</span>
        <button type="button" id="pair-stats-close" style="background: none; border: none; color: #94A3B8; cursor: pointer; font-size: 20px;">√ó</button>
      </div>
      <div id="pair-stats-content"></div>
      <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px;">
        <button type="button" id="pair-stats-prev" style="padding: 10px 20px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">‚Üê –ù–∞–∑–∞–¥</button>
        <span id="pair-stats-counter" style="color: #94A3B8; font-size: 14px;"></span>
        <button type="button" id="pair-stats-next" style="padding: 10px 20px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ (—Å–µ—Ä–∂–∞–Ω—Ç/–ø–æ–º–æ—â–Ω–∏–∫) -->
  <div id="create-survey-modal" class="modal modal-center" style="display: none;">
    <div class="modal-content" style="max-width: 400px; padding: 20px; border-radius: 12px;">
      <p style="color: #E2E8F0; margin-bottom: 12px; font-weight: 600;">–°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å</p>
      <label style="color: #94A3B8; font-size: 12px;">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
      <input type="text" id="create-survey-title" placeholder="–¢–µ–º–∞ –æ–ø—Ä–æ—Å–∞" style="width: 100%; padding: 10px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #E2E8F0; margin-bottom: 12px; box-sizing: border-box;" />
      <label style="color: #94A3B8; font-size: 12px;">–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞ (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</label>
      <textarea id="create-survey-options" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 1\n–í–∞—Ä–∏–∞–Ω—Ç 2\n–í–∞—Ä–∏–∞–Ω—Ç 3" rows="4" style="width: 100%; padding: 10px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #E2E8F0; margin-bottom: 12px; box-sizing: border-box; resize: vertical;"></textarea>
      <div style="display: flex; gap: 10px;">
        <button type="button" id="create-survey-cancel" style="flex: 1; padding: 12px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" id="create-survey-ok" style="flex: 1; padding: 12px; background: #3B82F6; color: white; border: none; border-radius: 8px; cursor: pointer;">–°–æ–∑–¥–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ (–≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –∑–∞–º–µ—Ç–∫–∞—Ö) -->
  <button type="button" id="add-task-fab" aria-label="–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É">+</button>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –∑–∞–¥–∞—á–∏ (–≤–º–µ—Å—Ç–æ prompt) -->
  <div id="add-task-modal" class="modal modal-center" style="display: none;">
    <div class="modal-content" style="max-width: 340px; padding: 20px; border-radius: 12px;">
      <p style="color: #E2E8F0; margin-bottom: 12px; font-weight: 600;">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</p>
      <input type="text" id="add-task-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏..." maxlength="500"
             style="width: 100%; padding: 12px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #E2E8F0; font-size: 16px; margin-bottom: 16px; box-sizing: border-box;" />
      <div style="display: flex; gap: 10px;">
        <button type="button" id="add-task-cancel" style="flex: 1; padding: 12px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" id="add-task-ok" style="flex: 1; padding: 12px; background: #3B82F6; color: white; border: none; border-radius: 8px; cursor: pointer;">–û–ö</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: —Å–æ–æ–±—â–µ–Ω–∏–µ (–≤–º–µ—Å—Ç–æ alert) -->
  <div id="toast-modal" class="modal modal-center" style="display: none;">
    <div class="modal-content" style="max-width: 320px; padding: 20px; border-radius: 12px;">
      <p id="toast-message" style="color: #E2E8F0; margin-bottom: 16px; text-align: center;"></p>
      <button type="button" id="toast-ok" style="width: 100%; padding: 12px; background: #3B82F6; color: white; border: none; border-radius: 8px; cursor: pointer;">–û–ö</button>
    </div>
  </div>

  <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞) ‚Äì –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–º–µ–Ω–∏–ª "–†–µ–π—Ç–∏–Ω–≥" –Ω–∞ "–û–ø—Ä–æ—Å" -->
  <nav class="bottom-nav" id="bottom-nav">
    <a href="#notes" class="nav-item" data-tab="notes">
      <svg><use xlink:href="#icon-notes"/></svg>
      <span>–ó–∞–º–µ—Ç–∫–∏</span>
    </a>
    <a href="#duties" class="nav-item" data-tab="duties">
      <svg><use xlink:href="#icon-duties"/></svg>
      <span>–ù–∞—Ä—è–¥—ã</span>
    </a>
    <a href="#home" class="nav-item active" data-tab="home">
      <svg><use xlink:href="#icon-home"/></svg>
      <span>–ì–ª–∞–≤–Ω–∞—è</span>
    </a>
    <a href="#study" class="nav-item" data-tab="study">
      <svg><use xlink:href="#icon-study"/></svg>
      <span>–£—á–µ–±–∞</span>
    </a>
    <a href="#survey" class="nav-item" data-tab="survey">
      <svg><use xlink:href="#icon-survey"/></svg>
      <span>–û–ø—Ä–æ—Å</span>
    </a>
  </nav>

  <!-- –ò–∫–æ–Ω–∫–∏ SVG (—Å–∫—Ä—ã—Ç—ã) ‚Äì –¥–æ–±–∞–≤–∏–ª –∏–∫–æ–Ω–∫—É –¥–ª—è –æ–ø—Ä–æ—Å–∞ -->
  <svg style="display: none;">
    <symbol id="icon-home" viewBox="0 0 24 24">
      <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    </symbol>
    <symbol id="icon-notes" viewBox="0 0 24 24">
      <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
    </symbol>
    <symbol id="icon-duties" viewBox="0 0 24 24">
      <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
    </symbol>
    <symbol id="icon-study" viewBox="0 0 24 24">
      <path d="M12 3L1 9l11 6 11-6-11-6zm0 11l-9-4.5V15c0 2.8 4 5 9 5s9-2.2 9-5v-5.5l-9 4.5z"/>
    </symbol>
    <symbol id="icon-survey" viewBox="0 0 24 24">
      <path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h-2v2z"/>
    </symbol>
    <symbol id="icon-rating" viewBox="0 0 24 24">
      <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
    </symbol>
  </svg>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –∑–∞–¥–∞—á (–ø–æ —Ü–µ–Ω—Ç—Ä—É, –∫—Ä—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏) -->
  <div class="modal modal-center" id="task-menu" style="display:none;">
    <div class="modal-content task-menu-content">
      <div class="menu-item" id="edit-task">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</div>
      <div class="menu-item" id="delete-task">üóë –£–¥–∞–ª–∏—Ç—å</div>
      <div class="menu-item cancel" id="close-menu">–û—Ç–º–µ–Ω–∞</div>
    </div>
  </div>

  <!-- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–≤–º–µ—Å—Ç–æ prompt) -->
  <div id="edit-task-modal" class="modal modal-center" style="display: none;">
    <div class="modal-content" style="max-width: 340px; padding: 20px; border-radius: 12px;">
      <p style="color: #E2E8F0; margin-bottom: 12px; font-weight: 600;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É</p>
      <input type="text" id="edit-task-input" placeholder="–¢–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏..." maxlength="500"
             style="width: 100%; padding: 12px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #E2E8F0; font-size: 16px; margin-bottom: 16px; box-sizing: border-box;" />
      <div style="display: flex; gap: 10px;">
        <button type="button" id="edit-task-cancel" style="flex: 1; padding: 12px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" id="edit-task-ok" style="flex: 1; padding: 12px; background: #3B82F6; color: white; border: none; border-radius: 8px; cursor: pointer;">–û–ö</button>
      </div>
    </div>
  </div>

  <!-- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è (–≤–º–µ—Å—Ç–æ confirm) -->
  <div id="confirm-delete-modal" class="modal modal-center" style="display: none;">
    <div class="modal-content" style="max-width: 320px; padding: 20px; border-radius: 12px;">
      <p style="color: #E2E8F0; margin-bottom: 16px; text-align: center;">–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É?</p>
      <div style="display: flex; gap: 10px;">
        <button type="button" id="confirm-delete-cancel" style="flex: 1; padding: 12px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" id="confirm-delete-ok" style="flex: 1; padding: 12px; background: #EF4444; color: white; border: none; border-radius: 8px; cursor: pointer;">–£–¥–∞–ª–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (–∫–∞–∫ –±—É–¥–∏–ª—å–Ω–∏–∫) -->
  <div id="reminder-modal" class="modal modal-center" style="display: none;">
    <div class="modal-content reminder-modal-content" style="max-width: 340px; padding: 20px; border-radius: 16px;">
      <p style="color: #E2E8F0; margin-bottom: 8px; font-weight: 600;">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</p>
      <p style="color: #94A3B8; font-size: 13px; margin-bottom: 16px;">–í –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–∏–¥—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram</p>
      <div class="reminder-time-picker">
        <div class="time-wheel-wrap">
          <label class="time-wheel-label">–ß–∞—Å</label>
          <div class="time-wheel" id="reminder-hour-wheel" tabindex="0"></div>
        </div>
        <span class="time-sep">:</span>
        <div class="time-wheel-wrap">
          <label class="time-wheel-label">–ú–∏–Ω</label>
          <div class="time-wheel" id="reminder-minute-wheel" tabindex="0"></div>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button type="button" id="reminder-cancel" style="flex: 1; padding: 12px; background: #334155; color: #E2E8F0; border: none; border-radius: 8px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" id="reminder-ok" style="flex: 1; padding: 12px; background: #3B82F6; color: white; border: none; border-radius: 8px; cursor: pointer;">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>
</body>
</html>