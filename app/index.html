<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <meta name="theme-color" content="#1f2937" />
  <title>VITECHBOT</title>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç Telegram WebApp (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!) -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ —Å—Ç–∏–ª–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã -->
  <link rel="stylesheet" href="./style.css" />
  <script src="./script.js" defer></script>

  <!-- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ —Ä–∞–±–æ—Ç—ã —ç–∫—Ä–∞–Ω–æ–≤ -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: #0f172a;
      color: #e2e8f0;
      min-height: 100vh;
      padding-bottom: 80px;
    }

    /* === –≠–ö–†–ê–ù–´ (–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) === */
    .screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      min-height: 100vh;
      background: #0f172a;
      display: none;
      flex-direction: column;
      z-index: 10;
      padding-bottom: 80px;
      overflow-y: auto;
    }

    .screen.active {
      display: flex;
    }

    /* –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Ç–æ–∂–µ –∫–∞–∫ —ç–∫—Ä–∞–Ω */
    #main-content {
      position: relative;
      padding: 16px;
    }

    #main-content:not(.hidden) {
      display: block;
    }

    #main-content.hidden {
      display: none;
    }

    /* === –®–ê–ü–ö–ê === */
    .header {
      position: sticky;
      top: 0;
      background: #1e293b;
      padding: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 20;
      border-bottom: 1px solid #334155;
    }

    .user-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
    }

    .profile-info p {
      margin: 2px 0;
      font-size: 14px;
      color: #94a3b8;
    }

    .profile-info p:first-child {
      color: #e2e8f0;
      font-weight: 600;
    }

    .header-icons {
      display: flex;
      gap: 8px;
    }

    .icon-btn {
      background: transparent;
      border: none;
      color: #e2e8f0;
      font-size: 20px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
    }

    .icon-btn:hover {
      background: #334155;
    }

    /* === –í–ò–î–ñ–ï–¢–´ === */
    .widget {
      background: #1e293b;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      border-left: 4px solid #3b82f6;
    }

    .widget h3 {
      color: #93c5fd;
      margin-bottom: 8px;
      font-size: 16px;
    }

    .widget p {
      color: #cbd5e1;
      font-size: 14px;
    }

    /* === –≠–ö–†–ê–ù –ó–ê–ú–ï–¢–û–ö === */
    #notes-screen {
      padding-top: 80px; /* –û—Ç—Å—Ç—É–ø –¥–ª—è —à–∞–ø–∫–∏ */
    }

    .search-bar {
      position: fixed;
      top: 73px; /* –í—ã—Å–æ—Ç–∞ header */
      left: 0;
      right: 0;
      background: #1e293b;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 15;
      border-bottom: 1px solid #334155;
    }

    .search-bar svg {
      color: #64748b;
      flex-shrink: 0;
    }

    .search-bar input {
      flex: 1;
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 10px 12px;
      color: #e2e8f0;
      font-size: 14px;
      outline: none;
    }

    .search-bar input:focus {
      border-color: #3b82f6;
    }

    #task-list {
      padding: 80px 16px 16px; /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –¥–ª—è search-bar */
    }

    .task-card {
      background: #1e293b;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .task-card:hover {
      background: #334155;
    }

    .task-card.task-done {
      opacity: 0.6;
    }

    .task-card.task-done .task-text {
      text-decoration: line-through;
    }

    .task-checkbox {
      width: 24px;
      height: 24px;
      border: 2px solid #3b82f6;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .task-checkbox.checked {
      background: #3b82f6;
    }

    .task-checkbox.checked::after {
      content: '‚úì';
      color: white;
      font-size: 14px;
    }

    .task-text {
      flex: 1;
      color: #e2e8f0;
      font-size: 14px;
    }

    .task-actions {
      display: flex;
      gap: 8px;
    }

    .task-actions button {
      background: transparent;
      border: none;
      color: #94a3b8;
      font-size: 16px;
      cursor: pointer;
      padding: 4px;
    }

    .task-actions button:hover {
      color: #e2e8f0;
    }

    /* === FAB –ö–ù–û–ü–ö–ê === */
    #add-task-fab {
      position: fixed;
      bottom: 90px; /* –ù–∞–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π */
      right: 20px;
      width: 56px;
      height: 56px;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 50%;
      font-size: 28px;
      cursor: pointer;
      display: none; /* –°–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      z-index: 30;
      transition: transform 0.2s;
    }

    #add-task-fab:hover {
      transform: scale(1.1);
    }

    #add-task-fab:active {
      transform: scale(0.95);
    }

    /* === –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø === */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #1e293b;
      display: flex;
      justify-content: space-around;
      padding: 8px 0;
      border-top: 1px solid #334155;
      z-index: 40;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      color: #64748b;
      text-decoration: none;
      font-size: 12px;
      padding: 8px 12px;
      border-radius: 8px;
      transition: color 0.2s;
    }

    .nav-item.active {
      color: #3b82f6;
    }

    .nav-item svg {
      width: 24px;
      height: 24px;
      fill: currentColor;
    }

    /* === –ú–û–î–ê–õ–¨–ù–û–ï –ú–ï–ù–Æ === */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .modal-content {
      background: #1e293b;
      border-radius: 12px;
      padding: 16px;
      min-width: 280px;
      max-width: 90%;
    }

    .menu-item {
      padding: 12px 16px;
      color: #e2e8f0;
      cursor: pointer;
      border-radius: 8px;
      transition: background 0.2s;
    }

    .menu-item:hover {
      background: #334155;
    }

    .menu-item.cancel {
      color: #f87171;
      margin-top: 8px;
      border-top: 1px solid #334155;
      padding-top: 12px;
    }

    /* === –≠–ö–†–ê–ù –û–ü–†–û–°–ê === */
    #survey-screen {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.95);
      z-index: 50;
      padding: 16px;
      overflow-y: auto;
    }

    #survey-screen .survey-container {
      max-width: 600px;
      margin: 40px auto;
      background: #0f172a;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }
  </style>
</head>
<body>
  <!-- –®–∞–ø–∫–∞ -->
  <header class="header">
    <div class="user-section" style="display: flex; align-items: center; gap: 12px;">
      <img src="https://ui-avatars.com/api/?name=–ó–∞–≥—Ä—É–∑–∫–∞...&background=3B82F6&color=fff" 
           alt="–ê–≤–∞—Ç–∞—Ä" class="avatar" />
      <div class="profile-info">
        <p id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        <p id="userCourse">–ö—É—Ä—Å: ‚Äî</p>
        <p id="userGroup">–ì—Ä—É–ø–ø–∞: ‚Äî</p>
      </div>
    </div>
    <div class="header-icons">
      <button class="icon-btn" onclick="openNotifications()">üîî</button>
      <button class="icon-btn" onclick="openSettings()">‚ãÆ</button>
    </div>
  </header>

  <!-- === –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù (–≤–∏–¥–∂–µ—Ç—ã) === -->
  <main class="screen active" id="main-content">
    <div class="widget">
      <h3>üå°Ô∏è –ü–æ–≥–æ–¥–∞ –≤ –í–æ—Ä–æ–Ω–µ–∂–µ</h3>
      <p>-3¬∞C, —Å–Ω–µ–≥ ‚ùÑÔ∏è</p>
    </div>
    <div class="widget">
      <h3>üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
      <ul class="schedule-list" style="list-style: none; padding: 0; margin: 0;">
        <li style="margin-bottom: 6px;">9:00 ‚Äî –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ (310) ‚Äî –ò–≤–∞–Ω–æ–≤ –ò.–ò.</li>
        <li style="margin-bottom: 6px;">11:00 ‚Äî –§–∏–∑–∏–∫–∞ (215) ‚Äî –ü–µ—Ç—Ä–æ–≤ –ü.–ü.</li>
        <li style="margin-bottom: 6px;">14:00 ‚Äî –•–∏–º–∏—è (405) ‚Äî –°–∏–¥–æ—Ä–æ–≤–∞ –ê.–ö.</li>
        <li>16:00 ‚Äî –§–∏–∑-—Ä–∞ (—Å—Ç–∞–¥–∏–æ–Ω) ‚Äî –ö–æ–∑–ª–æ–≤ –í.–°.</li>
      </ul>
    </div>
    <div class="widget" id="next-duty-widget">
      <h3>üéñÔ∏è –ë–ª–∏–∂–∞–π—à–∏–π –Ω–∞—Ä—è–¥</h3>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
    </div>
    <div class="widget">
      <h3>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
      <ul class="notification-list" style="list-style: none; padding: 0; margin: 0;">
        <li style="margin-bottom: 6px;">–°–µ—Ä–∂–∞–Ω—Ç: –ì—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ 15.02</li>
        <li style="margin-bottom: 6px;">–ê–¥–º–∏–Ω: –û—Ç–º–µ–Ω–∞ –ø–∞—Ä—ã –ø–æ —Ñ–∏–∑–∏–∫–µ</li>
        <li>–°–∏—Å—Ç–µ–º–∞: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: —Å–¥–∞—Ç—å —Ñ–æ—Ä–º—É</li>
      </ul>
    </div>
  </main>

  <!-- === –≠–ö–†–ê–ù –ó–ê–ú–ï–¢–û–ö (–ó–ê–î–ê–ß–ù–ò–ö) === -->
  <div id="notes-screen" class="screen">
    <div class="search-bar">
      <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><path d="M15.5 14.3l-3.7-3.7c1.2-1.5 1.8-3.4 1.5-5.3-0.4-2.3-2.2-4.1-4.5-4.5-3.9-0.8-7.2 2.4-6.4 6.3 0.4 2.3 2.2 4.1 4.5 4.5 1.9 0.3 3.8-0.3 5.3-1.5l3.7 3.7c0.4 0.4 1 0.4 1.4 0s0.4-1 0-1.4z"/></svg>
      <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–¥–∞—á–∞–º..." />
    </div>
    <div class="task-list" id="task-list">
      <p style="color: #6b7280; text-align: center; padding-top: 40px;">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p>
    </div>
  </div>

  <!-- === –≠–ö–†–ê–ù –ù–ê–†–Ø–î–û–í === -->
  <div id="duties-screen" class="screen">
    <div style="padding: 80px 16px 16px;">
      <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º -->
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <button id="prev-month-btn" onclick="changeMonth(-1)" style="background: #1E293B; border: none; color: #CBD5E1; padding: 8px 16px; border-radius: 8px; cursor: pointer;">‚Üê</button>
        <h3 id="current-month" style="color: #93C5FD; margin: 0; font-size: 18px;">–§–µ–≤—Ä–∞–ª—å 2026</h3>
        <button id="next-month-btn" onclick="changeMonth(1)" style="background: #1E293B; border: none; color: #CBD5E1; padding: 8px 16px; border-radius: 8px; cursor: pointer;">‚Üí</button>
      </div>
      
      <!-- –ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–µ -->
      <div style="margin-bottom: 16px;">
        <input 
          type="date" 
          id="duty-date-search" 
          style="width: 100%; padding: 10px; background: #1E293B; border: 1px solid #334155; border-radius: 8px; color: #CBD5E1; font-size: 14px;"
          onchange="searchDutyByDate(this.value)"
        />
        <button onclick="clearDateSearch()" style="margin-top: 8px; background: #3B82F6; border: none; color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; width: 100%;">–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫</button>
      </div>
      
      <!-- –°–ø–∏—Å–æ–∫ –Ω–∞—Ä—è–¥–æ–≤ -->
      <div id="duties-list-container">
        <p style="color: #64748B; text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Ä—è–¥–æ–≤...</p>
      </div>
      
      <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ –¥–∞—Ç–µ -->
      <div id="date-search-results" style="display: none; margin-top: 20px;">
        <h4 style="color: #93C5FD; margin-bottom: 12px;">–£—á–∞—Å—Ç–Ω–∏–∫–∏ –Ω–∞—Ä—è–¥–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É:</h4>
        <div id="date-search-content"></div>
      </div>
    </div>
  </div>

  <!-- === –≠–ö–†–ê–ù –£–ß–Å–ë–´ === -->
  <div id="study-screen" class="screen">
    <div style="padding: 80px 16px 16px;">
      <div class="widget">
        <h3>üìö –£—á—ë–±–∞</h3>
        <p>–ú–æ–¥—É–ª—å –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ó–¥–µ—Å—å –±—É–¥—É—Ç —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.</p>
      </div>
    </div>
  </div>

  <!-- === –≠–ö–†–ê–ù –û–ü–†–û–°–ê === -->
  <div id="survey-screen" class="screen">
    <div class="survey-container">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
        <h2 style="color: #93C5FD; margin: 0;">üìä –û–ø—Ä–æ—Å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞—Ä—è–¥–æ–≤</h2>
        <button
          type="button"
          onclick="switchTab('home')"
          style="
            background: transparent;
            border: none;
            color: #9CA3AF;
            font-size: 20px;
            cursor: pointer;
          "
        >
          ‚úï
        </button>
      </div>
      <p style="color: #CBD5E1; margin-bottom: 16px;">
        –û—Ü–µ–Ω–∏—Ç–µ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –ø–æ —à–∫–∞–ª–µ –æ—Ç 1 (–æ—á–µ–Ω—å –ª–µ–≥–∫–æ) –¥–æ 5 (–æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ).
        –í–∞—à–µ –º–Ω–µ–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É.
      </p>
      <div id="survey-objects-container">
        <p style="color: #6b7280; text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤...</p>
      </div>
      <button
        id="submit-survey-btn"
        style="
          background-color: #3B82F6;
          color: white;
          border: none;
          padding: 12px 24px;
          border-radius: 8px;
          width: 100%;
          margin-top: 20px;
          cursor: pointer;
        "
      >
        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—Ü–µ–Ω–∫–∏
      </button>
    </div>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ (–≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –∑–∞–º–µ—Ç–∫–∞—Ö) -->
  <button id="add-task-fab" onclick="startAddTask()">+</button>

  <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
  <nav class="bottom-nav" id="bottom-nav">
    <a href="#notes" class="nav-item" data-tab="notes">
      <svg><use xlink:href="#icon-notes"/></svg>
      <span>–ó–∞–º–µ—Ç–∫–∏</span>
    </a>
    <a href="#duties" class="nav-item" data-tab="duties">
      <svg><use xlink:href="#icon-duties"/></svg>
      <span>–ù–∞—Ä—è–¥—ã</span>
    </a>
    <a href="#home" class="nav-item active" data-tab="home">
      <svg><use xlink:href="#icon-home"/></svg>
      <span>–ì–ª–∞–≤–Ω–∞—è</span>
    </a>
    <a href="#study" class="nav-item" data-tab="study">
      <svg><use xlink:href="#icon-study"/></svg>
      <span>–£—á–µ–±–∞</span>
    </a>
    <a href="#survey" class="nav-item" data-tab="survey">
      <svg><use xlink:href="#icon-survey"/></svg>
      <span>–û–ø—Ä–æ—Å</span>
    </a>
  </nav>

  <!-- –ò–∫–æ–Ω–∫–∏ SVG -->
  <svg style="display: none;">
    <symbol id="icon-home" viewBox="0 0 24 24">
      <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    </symbol>
    <symbol id="icon-notes" viewBox="0 0 24 24">
      <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
    </symbol>
    <symbol id="icon-duties" viewBox="0 0 24 24">
      <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
    </symbol>
    <symbol id="icon-study" viewBox="0 0 24 24">
      <path d="M12 3L1 9l11 6 11-6-11-6zm0 11l-9-4.5V15c0 2.8 4 5 9 5s9-2.2 9-5v-5.5l-9 4.5z"/>
    </symbol>
    <symbol id="icon-survey" viewBox="0 0 24 24">
      <path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h-2v2z"/>
    </symbol>
  </svg>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –∑–∞–¥–∞—á -->
  <div class="modal" id="task-menu">
    <div class="modal-content">
      <div class="menu-item" id="edit-task">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</div>
      <div class="menu-item" id="delete-task">üóë –£–¥–∞–ª–∏—Ç—å</div>
      <div class="menu-item" id="set-reminder">‚è∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</div>
      <div class="menu-item cancel" id="close-menu">–û—Ç–º–µ–Ω–∞</div>
    </div>
  </div>
</body>
</html>