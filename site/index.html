<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0f172a" />
  <title>ВИТЕХ</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%233B82F6' width='32' height='32' rx='6'/%3E%3C/svg%3E" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <a href="#" class="logo" id="nav-home" data-module="home">ВИТЕХ</a>
      <nav class="topbar-nav main-nav">
        <a href="#" class="nav-link active" data-module="home">Главная</a>
        <a href="#" class="nav-link" data-module="duties">Наряды</a>
        <a href="#" class="nav-link" data-module="study">Учёба</a>
        <a href="#" class="nav-link" data-module="surveys">Опросы</a>
        <a href="#" class="nav-link" data-module="plans">Планы</a>
        <a href="#" class="nav-link" data-module="rating">Рейтинг</a>
        <a href="#" class="nav-link" data-module="forum">Форум</a>
      </nav>
      <nav class="topbar-nav right-nav">
        <button type="button" class="topbar-btn profile-btn" id="btn-profile" title="Профиль" aria-label="Профиль">
          <span class="topbar-avatar" id="header-avatar">—</span>
          <span class="topbar-name" id="header-name">Профиль</span>
        </button>
      </nav>
    </div>
  </header>

  <!-- Login screen -->
  <main id="screen-login" class="screen screen-login" style="display: none;">
    <div class="login-card">
      <h1 class="login-title">ВИТЕХ</h1>
      <p class="login-desc">Единая платформа для курсантов: расписание, наряды, рейтинг, учёба.</p>
      <div class="login-form">
        <label class="login-label">Telegram ID</label>
        <input type="text" id="input-telegram-id" class="login-input" placeholder="Например: 123456789" autocomplete="off" />
        <label class="login-label" style="margin-top:12px">Группа</label>
        <input type="text" id="input-group" class="login-input" placeholder="Например: Ио6-23" autocomplete="off" />
        <label class="login-label" style="margin-top:12px">Год набора</label>
        <input type="number" id="input-year" class="login-input" placeholder="2023" min="2020" max="2030" autocomplete="off" />
        <button type="button" id="btn-login" class="login-btn">Войти</button>
      </div>
      <p class="login-hint">Введите свой Telegram ID, группу и год набора. Группа и год нужны для загрузки расписания с Апекс ВУЗ.</p>
      <p style="margin-top:16px"><a href="#" id="btn-reset-login" class="link-btn">Сбросить вход</a> — очистить сохранённые ID и группу, ввести заново.</p>
    </div>
  </main>

  <!-- Home: My Day -->
  <main id="screen-home" class="screen screen-home">
    <div class="page-head">
      <h1 class="page-title">Мой день</h1>
      <p class="page-subtitle" id="subtitle-date">Загрузка…</p>
    </div>

    <section class="card card-schedule-main" id="card-schedule-main">
      <div class="schedule-main-header">
        <h2 class="card-title">Расписание</h2>
        <span class="schedule-group-label" id="schedule-group-label"></span>
      </div>
      <div class="card-body" id="schedule-main-body">
        <div class="schedule-compact" id="schedule-compact">
          <p class="list-placeholder">Загрузка…</p>
        </div>
      </div>
    </section>

    <div class="cards-grid home-cards">
      <section class="card" aria-labelledby="card-duty-title">
        <h2 id="card-duty-title" class="card-title">Ближайший наряд</h2>
        <p class="card-meta" id="duty-meta"></p>
        <div class="card-body" id="duty-content">
          <p class="list-placeholder">Загрузка…</p>
        </div>
      </section>
      <section class="card" aria-labelledby="card-notifications-title">
        <h2 id="card-notifications-title" class="card-title">Изменения</h2>
        <p class="card-meta">расписание и график по вашей группе</p>
        <div class="card-body">
          <ul class="list list-notifications" id="list-notifications">
            <li class="list-placeholder">Загрузка…</li>
          </ul>
        </div>
      </section>
      <section class="card card-rating-mini" id="card-rating-mini">
        <h2 class="card-title">Рейтинг</h2>
        <div class="rating-header">
          <div class="rating-me" id="rating-me">
            <span class="rating-me-avatar" id="rating-me-avatar">—</span>
            <div class="rating-me-info">
              <span class="rating-me-label">Ваши очки</span>
              <span class="rating-me-value" id="rating-me-points">—</span>
            </div>
          </div>
          <button type="button" class="link-btn accent" id="btn-rating-full" data-module="rating">Весь рейтинг →</button>
        </div>
      </section>
    </div>
  </main>

  <!-- Module with sidebar (Duties, Study, Forum) -->
  <div id="screen-module" class="layout-with-sidebar" style="display: none;">
    <aside class="local-sidebar" id="local-sidebar">
      <nav class="local-nav" id="local-nav"></nav>
    </aside>
    <main class="work-area" id="work-area"></main>
  </div>

  <!-- Surveys -->
  <main id="screen-surveys" class="screen screen-module-only" style="display: none;">
    <div class="page-head">
      <h1 class="page-title">Опросы</h1>
      <p class="page-subtitle">Оценка сложности нарядов и другие опросы</p>
    </div>
    <div class="card"><div class="card-body" id="surveys-content"><p class="list-placeholder">Загрузка…</p></div></div>
  </main>

  <!-- Plans -->
  <main id="screen-plans" class="screen screen-module-only" style="display: none;">
    <div class="page-head">
      <h1 class="page-title">Планы</h1>
      <p class="page-subtitle">Задачник и заметки</p>
    </div>
    <div class="card"><div class="card-body" id="plans-content"><p class="list-placeholder">Загрузка…</p></div></div>
  </main>

  <!-- Rating (full page) -->
  <main id="screen-rating" class="screen screen-module-only" style="display: none;">
    <div class="page-head">
      <h1 class="page-title">Рейтинг</h1>
      <p class="page-subtitle">Рейтинг курсантов по активности</p>
    </div>
    <div class="rating-filters" id="rating-filters">
      <button type="button" class="filter-btn active" data-scope="course">Курс</button>
      <button type="button" class="filter-btn" data-scope="institute">Институт</button>
      <span class="filter-sep">|</span>
      <button type="button" class="filter-btn active" data-period="all">Всё время</button>
      <button type="button" class="filter-btn" data-period="month">Месяц</button>
    </div>
    <div class="card"><div class="card-body" id="rating-full-content"><p class="list-placeholder">Загрузка…</p></div></div>
  </main>

  <!-- Profile (full page) -->
  <main id="screen-profile" class="screen screen-module-only" style="display: none;">
    <div class="page-head">
      <h1 class="page-title">Профиль</h1>
    </div>
    <div id="profile-page-content"><p class="list-placeholder">Загрузка…</p></div>
  </main>

  <!-- Admin panel -->
  <main id="screen-admin" class="screen screen-admin" style="display: none;">
    <div class="page-head">
      <h1 class="page-title">Админ-панель</h1>
      <p class="page-subtitle">Пользователи, роли, больничные</p>
      <p><a href="#" class="link-btn accent" id="admin-back">← Назад</a></p>
    </div>
    <div class="card" id="admin-sick-leave-card">
      <h2 class="card-title">Больничный</h2>
      <div class="card-body">
        <p class="muted">Укажите дату больничного.</p>
        <form id="admin-sick-leave-form" class="admin-form">
          <input type="date" id="admin-sick-leave-date" required />
          <button type="submit" class="btn-accent">Сообщить о больничном</button>
        </form>
        <p id="admin-sick-leave-status" class="muted"></p>
      </div>
    </div>
    <div class="card">
      <h2 class="card-title">Пользователи и роли</h2>
      <div class="card-body"><div id="admin-users-list"></div></div>
    </div>
  </main>

  <footer class="footer">
    <p>ВИТЕХ — расписание, наряды, рейтинг и учёба в одном месте.</p>
  </footer>

  <script src="app.js" defer></script>
</body>
</html>
